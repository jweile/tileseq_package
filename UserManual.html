<html>
<head>
	<title>TileSEQ Analysis Package 1.1</title>
	<style type="text/css">
	body{
		font-family: Helvetica,sans-serif;
		padding:1cm;
		width:8.5in;
		text-align: justify;
		margin-bottom: 2in;
	}
	td,th {
		vertical-align: top;
		text-align: justify;
	}
	th {
		background: #eeeeee;
	}
	table {
		border: 1px dotted gray;
		padding: 0.5ex;
	}
	pre {
		background-color: #eeeeee;
		border: 1px dashed gray;
		padding: 0.5ex;
	}
	.caption {
		text-align: center;
	}
	</style>
</head>
<body>
	<h1>TileSEQ Analysis Package v1.5</h1>
	<p>Song Sun, Roth Lab 2017</p>
	<h2>Description, Prerequisites and Contents</h2>
	<p>These scripts were written to process <code>fastq.gz</code> files (e.g., <code>1_S1_L001_R1_001.fastq.gz / 1_S1_L001_R2_001.fastq.gz</code>) generated by TileSEQ by submitting jobs to Sun Grid Engine (SGE) queuing system. The package contains three perl scripts: 
		<ul>
			<li><code>TileSEQ_FASTQ2Function.pl</code></li>
			<li><code>tileseq_mut2func.pl</code></li>
			<li><code>tileseq_sam2mut.pl</code></li>
		</ul>
		and two example input files: 
		<ul>
			<li><code>CBS_seq.txt</code></li>
			<li><code>mut2func_info.csv</code></li>
		</ul>
	</p>
	<p>SunGridEngine, Perl and Bowtie2 are required to be installed. As this program makes use of high-performance cluster computing, it should only be executed on a suitable computing cluster with multiple nodes.</p>

	<h2>Usage</h2>
	<ol>
		<li>Copy the three perl scripts into the directory where the <code>fastq.gz</code> files are.</li>
		<li>Create two input files for your own gene and experiments:
			<ul>
				<li><code>&lt;geneName&gt;_seq.txt</code>, where &lt;geneName&gt; is a placeholder for your gene name of choice (e.g. UBE2I). The file should contain the template sequence for the alignment and the coding sequence including a stop codon. The gene name should be spelled in captial letters. The file requires a specific format consisting of two lines: the first line is <code>&lt;geneName&gt;_template</code> followed by a space or tab and then the actual template sequence including the coding sequence and upstream/downstream sequences, the second line is <code>&lt;geneName&gt;_coding</code> followed by a space or tab and then the actual coding sequence.
				</li>
				<li>A file called <code>mut2func_info.csv</code>, which contains seven lines. The first line contains the corresponding amino acid positions for each tile. 
				The remaining six lines contain the sequencing sample name for each multiplexed librarys sorted into each of the six experiments: <code>nonselect1</code>, <code>nonselect2</code>, <code>select1</code>, <code>select2</code>, <code>wt1</code>, <code>wt2</code>. Note: for quality check runs, the mut2func_info.csv should only contain three lines including the first line with tile information, and two lines with sequencing sample name for <code>nonselect1</code> and <code>nonselect2</code> (in QC, <code>nonselect1</code> and <code>nonselect2</code> are the same).
				</li>
			</ul>
		</li>
		<li>
			Run the control perl script <code>TileSEQ_FASTQ2Function.pl</code> after reading the doumentation in the beginning of the script. Three arguments are required for this script.
			<ul>
				<li>The gene name, e.g. UBE2I</li>
				<li>A Qscore cutoff, e.g. 20</li>
				<li>The full path for the location of the bowtie2 executable, e.g. <code>/home/rothlab/jweile/bin</code></li>
			</ul>
		</li>
		<li>Six new directories will be created:
			<ul>
				<li><code>bowtieIndex</code>: Bowtie2 index files for your gene</li>
				<li><code>shfile</code>: all the .sh files for the job submission</li>
				<li><code>fastqfile</code>: all the unzipped fastq files</li>
				<li><code>samfile</code>: all the alignment files in sam format</li>
				<li><code>mutationCallfile</code>: six files wil begenerated for each library (e.g., <code>1report.txt, 1AAchange.txt, 1MultipleMut.txt, 1deletion.txt, 1insertion.txt, 1noncoding.txt</code></li>
				<li><code>resultfile</code>: five result files will be generated (<code>correlation_control.txt, correlation_nonselect.txt, correlation_select.txt, foldchange.txt, rawData.txt</code>)</li>
			</ul>
		</li>
	</ol>
</body>
</html>